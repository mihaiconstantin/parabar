<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This is a concrete implementation of the abstract class Backend
that implements the Service interface. This backend executes
tasks in parallel asynchronously (i.e., without blocking the main R
session) on a parallel::makeCluster() cluster created in a background R
session."><title>AsyncBackend — AsyncBackend • parabar</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="AsyncBackend — AsyncBackend"><meta property="og:description" content="This is a concrete implementation of the abstract class Backend
that implements the Service interface. This backend executes
tasks in parallel asynchronously (i.e., without blocking the main R
session) on a parallel::makeCluster() cluster created in a background R
session."><meta property="og:image" content="http://parabar.mihaiconstantin.com/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">parabar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/comparison.html">Comparison with other approaches</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mihaiconstantin/parabar/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>AsyncBackend</h1>
      <small class="dont-index">Source: <a href="https://github.com/mihaiconstantin/parabar/blob/HEAD/R/AsyncBackend.R" class="external-link"><code>R/AsyncBackend.R</code></a></small>
      <div class="d-none name"><code>AsyncBackend.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a concrete implementation of the abstract class <code><a href="Backend.html">Backend</a></code>
that implements the <code><a href="Service.html">Service</a></code> interface. This backend executes
tasks in parallel asynchronously (i.e., without blocking the main <code>R</code>
session) on a <code><a href="https://rdrr.io/r/parallel/makeCluster.html" class="external-link">parallel::makeCluster()</a></code> cluster created in a background <code>R</code>
<code><a href="https://callr.r-lib.org/reference/r_session.html" class="external-link">session</a></code>.</p>
    </div>


    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="Service.html">Service</a></code>, <code><a href="Backend.html">Backend</a></code>, <code><a href="SyncBackend.html">SyncBackend</a></code>,
<code><a href="ProgressTrackingContext.html">ProgressTrackingContext</a></code>, and <code><a href="TaskState.html">TaskState</a></code>.</p></div>
    </div>
    <div class="section level2">
    <h2 id="super-classes">Super classes<a class="anchor" aria-label="anchor" href="#super-classes"></a></h2>
    <p><code><a href="Service.html">parabar::Service</a></code> -&gt; <code><a href="Backend.html">parabar::Backend</a></code> -&gt; <code>AsyncBackend</code></p>
    </div>
    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>task_state</code></dt>
<dd><p>A list of logical values indicating the state of
the task execution. See the <code><a href="TaskState.html">TaskState</a></code> class for more
information on how the statues are determined. The following statuses
are available:</p><ul><li><p><code>task_not_started</code>: Indicates whether the backend is free. <code>TRUE</code>
signifies that no task has been started and the backend is free to
deploy.</p></li>
<li><p><code>task_is_running</code>: Indicates whether a task is currently running on
the backend.</p></li>
<li><p><code>task_is_completed</code>: Indicates whether a task has finished
executing. <code>TRUE</code> signifies that the output of the task has not been
fetched. Calling the method <code><a href="option.html">get_option()</a></code> will move the output from
the background <code>R</code> session to the main <code>R</code> session. Once the output
has been fetched, the backend is free to deploy another task.</p></li>
</ul></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-AsyncBackend-new"><code>AsyncBackend$new()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-finalize"><code>AsyncBackend$finalize()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-start"><code>AsyncBackend$start()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-stop"><code>AsyncBackend$stop()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-clear"><code>AsyncBackend$clear()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-peek"><code>AsyncBackend$peek()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-export"><code>AsyncBackend$export()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-evaluate"><code>AsyncBackend$evaluate()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-sapply"><code>AsyncBackend$sapply()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-lapply"><code>AsyncBackend$lapply()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-apply"><code>AsyncBackend$apply()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-get_output"><code>AsyncBackend$get_output()</code></a></p></li>
<li><p><a href="#method-AsyncBackend-clone"><code>AsyncBackend$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-AsyncBackend-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new <code>AsyncBackend</code> object.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/AsyncBackend.html">AsyncBackend</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>An object of class <code>AsyncBackend</code>.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-finalize"></a><div class="section">
<h3 id="method-finalize-">Method <code>finalize()</code><a class="anchor" aria-label="anchor" href="#method-finalize-"></a></h3>
<p>Destroy the current <code>AsyncBackend</code> instance.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">finalize</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>An object of class <code>AsyncBackend</code>.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-start"></a><div class="section">
<h3 id="method-start-">Method <code><a href="https://rdrr.io/r/stats/start.html" class="external-link">start()</a></code><a class="anchor" aria-label="anchor" href="#method-start-"></a></h3>
<p>Start the backend.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="va">specification</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>specification</code></dt>
<dd><p>An object of class <code><a href="Specification.html">Specification</a></code>
that contains the backend configuration.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>This method returns void. The resulting backend must be stored in the
<code>.cluster</code> private field on the <code><a href="Backend.html">Backend</a></code> abstract class,
and accessible to any concrete backend implementations via the active
binding <code>cluster</code>.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-stop"></a><div class="section">
<h3 id="method-stop-">Method <code><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop()</a></code><a class="anchor" aria-label="anchor" href="#method-stop-"></a></h3>
<p>Stop the backend.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="kw">stop</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>This method returns void.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-clear"></a><div class="section">
<h3 id="method-clear-">Method <code><a href="clear.html">clear()</a></code><a class="anchor" aria-label="anchor" href="#method-clear-"></a></h3>
<p>Remove all objects from the backend. This function is equivalent to
calling <code>rm(list = ls(all.names = TRUE))</code> on each node in the
backend.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">clear</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>This method returns void.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-peek"></a><div class="section">
<h3 id="method-peek-">Method <code><a href="peek.html">peek()</a></code><a class="anchor" aria-label="anchor" href="#method-peek-"></a></h3>
<p>Inspect the backend for variables available in the <code>.GlobalEnv</code>.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">peek</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p>This method returns a list of character vectors, where each element
corresponds to a node in the backend. The character vectors contain
the names of the variables available in the <code>.GlobalEnv</code> on each
node.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-export"></a><div class="section">
<h3 id="method-export-">Method <code><a href="export.html">export()</a></code><a class="anchor" aria-label="anchor" href="#method-export-"></a></h3>
<p>Export variables from a given environment to the backend.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">export</span><span class="op">(</span><span class="va">variables</span>, <span class="va">environment</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>variables</code></dt>
<dd><p>A character vector of variable names to export.</p></dd>


<dt><code>environment</code></dt>
<dd><p>An environment object from which to export the
variables.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p>This method returns void.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-evaluate"></a><div class="section">
<h3 id="method-evaluate-">Method <code><a href="evaluate.html">evaluate()</a></code><a class="anchor" aria-label="anchor" href="#method-evaluate-"></a></h3>
<p>Evaluate an arbitrary expression on the backend.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">evaluate</span><span class="op">(</span><span class="va">expression</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>expression</code></dt>
<dd><p>An unquoted expression to evaluate on the backend.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h4>
<p>This method returns the result of the expression evaluation.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-sapply"></a><div class="section">
<h3 id="method-sapply-">Method <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply()</a></code><a class="anchor" aria-label="anchor" href="#method-sapply-"></a></h3>
<p>Run a task on the backend akin to <code><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parallel::parSapply()</a></code>.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">sapply</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>x</code></dt>
<dd><p>An atomic vector or list to pass to the <code>fun</code> function.</p></dd>


<dt><code>fun</code></dt>
<dd><p>A function to apply to each element of <code>x</code>.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments to pass to the <code>fun</code> function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-8">Returns<a class="anchor" aria-label="anchor" href="#returns-8"></a></h4>
<p>This method returns void. The output of the task execution must be
stored in the private field <code>.output</code> on the <code><a href="Backend.html">Backend</a></code>
abstract class, and is accessible via the <code>get_output()</code> method.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-lapply"></a><div class="section">
<h3 id="method-lapply-">Method <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code><a class="anchor" aria-label="anchor" href="#method-lapply-"></a></h3>
<p>Run a task on the backend akin to <code><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parallel::parLapply()</a></code>.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">lapply</span><span class="op">(</span><span class="va">x</span>, <span class="va">fun</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>x</code></dt>
<dd><p>An atomic vector or list to pass to the <code>fun</code> function.</p></dd>


<dt><code>fun</code></dt>
<dd><p>A function to apply to each element of <code>x</code>.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments to pass to the <code>fun</code> function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-9">Returns<a class="anchor" aria-label="anchor" href="#returns-9"></a></h4>
<p>This method returns void. The output of the task execution must be
stored in the private field <code>.output</code> on the <code><a href="Backend.html">Backend</a></code>
abstract class, and is accessible via the <code>get_output()</code> method.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-apply"></a><div class="section">
<h3 id="method-apply-">Method <code><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply()</a></code><a class="anchor" aria-label="anchor" href="#method-apply-"></a></h3>
<p>Run a task on the backend akin to <code><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parallel::parApply()</a></code>.</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">apply</span><span class="op">(</span><span class="va">x</span>, <span class="va">margin</span>, <span class="va">fun</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>x</code></dt>
<dd><p>An array to pass to the <code>fun</code> function.</p></dd>


<dt><code>margin</code></dt>
<dd><p>A numeric vector indicating the dimensions of <code>x</code> the
<code>fun</code> function should be applied over. For example, for a matrix,
<code>margin = 1</code> indicates applying <code>fun</code> rows-wise, <code>margin = 2</code>
indicates applying <code>fun</code> columns-wise, and <code>margin = c(1, 2)</code>
indicates applying <code>fun</code> element-wise. Named dimensions are also
possible depending on <code>x</code>. See <code><a href="https://rdrr.io/r/parallel/clusterApply.html" class="external-link">parallel::parApply()</a></code> and
<code><a href="https://rdrr.io/r/base/apply.html" class="external-link">base::apply()</a></code> for more details.</p></dd>


<dt><code>fun</code></dt>
<dd><p>A function to apply to <code>x</code> according to the <code>margin</code>.</p></dd>


<dt><code>...</code></dt>
<dd><p>Additional arguments to pass to the <code>fun</code> function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-10">Returns<a class="anchor" aria-label="anchor" href="#returns-10"></a></h4>
<p>This method returns void. The output of the task execution must be
stored in the private field <code>.output</code> on the <code><a href="Backend.html">Backend</a></code>
abstract class, and is accessible via the <code>get_output()</code> method.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-get_output"></a><div class="section">
<h3 id="method-get-output-">Method <code>get_output()</code><a class="anchor" aria-label="anchor" href="#method-get-output-"></a></h3>
<p>Get the output of the task execution.</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">get_output</span><span class="op">(</span>wait <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>wait</code></dt>
<dd><p>A logical value indicating whether to wait for the task
to finish executing before fetching the results. Defaults to <code>FALSE</code>.
See the <strong>Details</strong> section for more information.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>This method fetches the output of the task execution after calling
the <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply()</a></code> method. It returns the output and immediately removes
it from the backend. Subsequent calls to this method will throw an
error if no additional tasks have been executed in the meantime. This
method should be called after the execution of a task.</p>
<p>If <code>wait = TRUE</code>, the method will block the main process until the
backend finishes executing the task and the results are available. If
<code>wait = FALSE</code>, the method will immediately attempt to fetch the
results from the background <code>R</code> session, and throw an error if the
task is still running.</p>
</div>

<div class="section">
<h4 id="returns-11">Returns<a class="anchor" aria-label="anchor" href="#returns-11"></a></h4>
<p>A vector, matrix, or list of the same length as <code>x</code>, containing the
results of the <code>fun</code>. The output format differs based on the specific
operation employed. Check out the documentation for the <code>apply</code>
operations of <code><a href="https://rdrr.io/r/parallel/parallel-package.html" class="external-link">parallel::parallel</a></code> for more information.</p>
</div>

</div><p></p><hr><a id="method-AsyncBackend-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a specification object.</span></span></span>
<span class="r-in"><span><span class="va">specification</span> <span class="op">&lt;-</span> <span class="va"><a href="Specification.html">Specification</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set the number of cores.</span></span></span>
<span class="r-in"><span><span class="va">specification</span><span class="op">$</span><span class="fu">set_cores</span><span class="op">(</span>cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set the cluster type.</span></span></span>
<span class="r-in"><span><span class="va">specification</span><span class="op">$</span><span class="fu">set_type</span><span class="op">(</span>type <span class="op">=</span> <span class="st">"psock"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create an asynchronous backend object.</span></span></span>
<span class="r-in"><span><span class="va">backend</span> <span class="op">&lt;-</span> <span class="va">AsyncBackend</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Start the cluster on the backend.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="fu">start</span><span class="op">(</span><span class="va">specification</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check if there is anything on the backend.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="fu">peek</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a dummy variable.</span></span></span>
<span class="r-in"><span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"parabar"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Export the variable to the backend.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="fu">export</span><span class="op">(</span><span class="st">"name"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove variable from current environment.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run an expression on the backend, using the exported variable `name`.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="fu">evaluate</span><span class="op">(</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># Print the name.</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Hello, "</span>, <span class="va">name</span>, <span class="st">"!"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Hello, parabar!"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Hello, parabar!"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run a task in parallel (i.e., approx. 2.5 seconds).</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="fu">sapply</span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span></span>
<span class="r-in"><span>    fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="co"># Sleep a bit.</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>        <span class="co"># Compute something.</span></span></span>
<span class="r-in"><span>        <span class="va">output</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">1</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>        <span class="co"># Return the result.</span></span></span>
<span class="r-in"><span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Right know the main process is free and the task is executing on a `psock`</span></span></span>
<span class="r-in"><span><span class="co"># cluster started in a background `R` session.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Trying to get the output immediately will throw an error, indicating that the</span></span></span>
<span class="r-in"><span><span class="co"># task is still running.</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">backend</span><span class="op">$</span><span class="fu">get_output</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : A task is currently running.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># However, we can block the main process and wait for the task to complete</span></span></span>
<span class="r-in"><span><span class="co"># before fetching the results.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="fu">get_output</span><span class="op">(</span>wait <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  2  3  4  5  6  7  8  9 10 11</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clear the backend.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="fu">clear</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check that there is nothing on the cluster.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="fu">peek</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Stop the backend.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="kw">stop</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check that the backend is not active.</span></span></span>
<span class="r-in"><span><span class="va">backend</span><span class="op">$</span><span class="va">active</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://mihaiconstantin.com" class="external-link">Mihai Constantin</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

